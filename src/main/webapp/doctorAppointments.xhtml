<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">
<link rel="stylesheet" href="resources/theme.css"/>
<h:head>
    Меню Врача
</h:head>

<h:body>
    <h:form id="menu">
        <p:growl id="messages" showDetail="false" autoUpdate="true"/>

        <p:menu style="width:300px">
            <p:submenu label="Пациенты">
                <p:menuitem value="Список пациентов" action="#{menuView.showPatientList()}" update="@form"
                            process="@this"/>
                <p:menuitem value="Найти пациента по id" action="#{menuView.showSearchPat()}" update="@form"
                            process="@this"/>
            </p:submenu>
            <p:submenu label="Посещения">
                <p:menuitem value="Список посещений" action="#{menuView.showAppointmentsList()}" update="@form"
                            process="@this"/>
                <p:menuitem value="Найти посещение по id" action="#{menuView.showSearchApp()}" update="@form"
                            process="@this"/>
                <p:menuitem value="Добавить посещение"
                            url="http://localhost:8081/umb_war_exploded/addAppointment.xhtml"/>
            </p:submenu>
            <p:submenu label="Коллеги">
                <p:menuitem value="Список коллег" action="#{menuView.showDoctorsList()}" update="@form"
                            process="@this"/>
            </p:submenu>
        </p:menu>

        <p:dataTable id="patientsTable"
                     value="#{patientListBean.patientList}"
                     rendered="#{menuView.patientsShow}"
                     var="row"
                     style="margin-left: 350px; margin-top: -400px; width: auto">
            <p:column headerText="Имя">
                <h:outputText value="#{row.pFirstName}"/>
            </p:column>
            <p:column headerText="Дата рождения">
                <h:outputText value="#{row.pBirthDay}"/>
            </p:column>
        </p:dataTable>

        <p:dataTable id="appsTable"
                     value="#{appointmentListBean.appointmentList}"
                     rendered="#{menuView.appointmentsShow}"
                     var="row"
                     style="margin-left: 350px;  margin-top: -400px; width: auto">
            <p:column headerText="Дата посещения">
                <h:outputText value="#{row.appDate}"/>
            </p:column>
            <p:column headerText="Диагноз">
                <h:outputText value="#{row.appDiagnosis}"/>
            </p:column>
            <p:column headerText="Заметки">
                <h:outputText value="#{row.appNotes}"/>
            </p:column>
            <p:column headerText="Тип посещения">
                <h:outputText value="#{row.appType}"/>
            </p:column>
            <p:column headerText="ID врача">
                <h:outputText value="#{row.appDocUnid}"/>
            </p:column>

        </p:dataTable>

        <p:dataTable id="docsTable"
                     value="#{doctorListBean.doctorList}"
                     rendered="#{menuView.doctorsShow}"
                     var="row"
                     style="margin-left: 350px; margin-top: -400px; width: auto">
            <p:column headerText="Имя">
                <h:outputText value="#{row.docFullname}"/>
            </p:column>
            <p:column headerText="ID">
                <h:outputText value="#{row.docUnid}"/>
            </p:column>
        </p:dataTable>

        <h:form id="searchApp" rendered="#{menuView.searchAppShow}"
                style="margin-left: 350px; margin-top: -450px; width: 300px"
        >
            <h:outputText value="Введите ID посещения"
                          style="margin-left: 350px; margin-top: -450px; width: 300px"
            />
            <p:inputText value="#{appointmentBean.selectedAppId}" id="appointmentId"
                         style=" width: 280px"
            />
            <p:commandButton value="Посещение с указанным ID"
                             actionListener="#{appointmentBean.selectCurrentApp}"
                             style="width: 300px"
                             process="@this"/>
            <h:outputText value="#{appointmentBean.currentAppointment.appName}" id="outId"
                          style="width: 300px"
            />

        </h:form>

        <h:form id="searchPat" rendered="#{menuView.searchPatShow}"
                style="margin-left: 350px; margin-top: -450px; width: 300px"
        >
            <h:outputText value="Введите ID пациента"/>
            <p:inputText value="#{patientBean.selectedPatientId}" id="patientId"/>
            <p:commandButton value="Пациент с указанным ID"
                             actionListener="#{patientBean.selectCurrentPatient}"
                             process="@this"/>
            <h:outputText value="#{patientBean.currentPatient.pFullName}" id="patOut"/>

        </h:form>
    </h:form>


    <h:form id="bugsForm" style="width:300px">

        <p:inputText id="bugs"
                     style="width:280px"
        />
        <p:commandButton id="ajaxBugsSubmit"
                         action="BUGS"
                         value="Отправьте нам любую полезную информацию\баги"
                         style="width:300px">
        </p:commandButton>
    </h:form>
</h:body>
</html>
